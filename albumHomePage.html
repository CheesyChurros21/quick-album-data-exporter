<!DOCTYPE html>

<html>
    <head>
        <link rel='stylesheet' href='albumDisplayer.css'>

        <title>
            Album Displayer
        </title>

        <header class='websiteTitle'>
            Album Database Browser
        </header>
    </head>
    <br>
    <br>
    <br>
    <body style="text-align: center;">

        <form action="circleDisplayer.html" method="get" onsubmit="return checkEmptyCircleSubmit()">
            <label for="circleSorter">Circle Sorter - </label>
            <select id="circleDropdown" name="circleDropdown">
                <option value="No Input Detected" style="display: none">Select An Option</option>
            </select>

            <input type="submit" value="Submit">
        </form>

        <br><br><br>

        <form action="albumSorter.html" method="get" onsubmit="return checkEmptySortSubmit()">
            <!--
            <label for="albumSorter">Album Sorter - </label>
            <select id="sortOptions" name="sortOptions">
                <option value="No Input Detected" style="display: none">Select An Option</option>
                <option value="Descending Jordan Objective Rating">Descending Jordan Objective Rating</option>
                <option value="Descending Nick Objective Rating">Descending Nick Objective Rating</option>
                <option value="Descending Jordan Subjective Rating">Descending Jordan Subjective Rating</option>
                <option value="Descending Nick Subjective Rating">Descending Nick Subjective Rating</option>
                <option value="Ascending Jordan Objective Rating">Ascending Jordan Objective Rating</option>
                <option value="Ascending Nick Objective Rating">Ascending Nick Objective Rating</option>
                <option value="Ascending Jordan Subjective Rating">Ascending Jordan Subjective Rating</option>
                <option value="Ascending Nick Subjective Rating">Ascending Nick Subjective Rating</option>

                <option value="Descending Combined Objective Rating">Descending Combined Objective Rating</option>
                <option value="Descending Combined Subjective Rating">Descending Combined Subjective Rating</option>
                <option value="Ascending Combined Objective Rating">Ascending Combined Objective Rating</option>
                <option value="Ascending Combined Subjective Rating">Ascending Combined Subjective Rating</option>
                
            </select>
            -->
            <label for="order">Order - </label>
            <select id="orderOptions" name="orderOptions">
                <option value="No Input Detected" style="display: none">Select An Option</option>
                <option value="Descending">Descending</option>
                <option value="Ascending">Ascending</option>
            </select>

            <br>

            <label for="who">Who - </label>
            <select id="whoOptions" name="whoOptions">
                <option value="No Input Detected" style="display: none">Select An Option</option>
                <option value="Jordan">Jordan</option>
                <option value="Nick">Nick</option>
                <option value="Combined">Combined</option>
            </select>

            <br>

            <label for="rankType">Rank Type - </label>
            <select id="rankType" name="rankType">
                <option value="No Input Detected" style="display: none">Select An Option</option>
                <option value="Objective">Objective</option>
                <option value="Subjective">Subjective</option>
            </select>

            <br>

            <label for="range">Rank Range Inclusive - </label>
            <input type="number" id="rangeStart" name="rangeStart" min="0" max="10" step="any" value="0">
            <input type="number" id="rangeEnd" name="rangeEnd" min="0" max="10" step="any" value="10">
            <br>

            <input type="submit" value="Submit">
        </form>

        <br><br><br>

        <form action="albumTierList.html" method="get" onsubmit="return checkEmptyTierListSubmit()">
            <label for="whoTierList">Who - </label>
            <select id="whoOptionsTierList" name="whoOptionsTierList">
                <option value="No Input Detected" style="display: none">Select An Option</option>
                <option value="Jordan">Jordan</option>
                <option value="Nick">Nick</option>
                <option value="Combined">Combined</option>
            </select>

            <br>

            <label for="rankTypeTierList">Rank Type - </label>
            <select id="rankTypeTierList" name="rankTypeTierList">
                <option value="No Input Detected" style="display: none">Select An Option</option>
                <option value="Objective">Objective</option>
                <option value="Subjective">Subjective</option>
            </select>

            <br>

            <label for="albumTierList">Album Tier List - </label>
            <input type="submit" value="Submit">
        </form>
    </body>


    <script>
    
        let circleNames = [];
        let circleDropdown = document.getElementById("circleDropdown");

        fetch('all_albums.json')
        .then(response => response.json())
        .then(data => {
            circleNames = data.map(entry => entry.circleName);
            
            const uniqueMap = new Map();
            circleNames.forEach(name => {
                const lower = name.toLowerCase();
                if (!uniqueMap.has(lower)) {
                    uniqueMap.set(lower, name);
                }
            })

            circleNames = Array.from(uniqueMap.values());

            circleNames.sort((a, b) => a.localeCompare(b, "en", {"sensitivity" : "base"}))
            console.log(circleNames);

            for (let i = 0; i < circleNames.length; i = i + 1) {
                let circle = document.createElement("option");
                circle.value = circleNames[i];
                circle.textContent = circleNames[i];
                circleDropdown.appendChild(circle);
            }
        })
        .catch(error => console.error('Error loading JSON:', error));


        function checkEmptySortSubmit() {
            if (document.getElementById("orderOptions").value == "No Input Detected") {
                alert("No Option Submitted For Order Type. \nMake Sure To Select An Option.")
                return false
            }

            else if (document.getElementById("whoOptions").value == "No Input Detected") {
                alert("No Option Submitted For Who Type. \nMake Sure To Select An Option.")
                return false
            }

            else if (document.getElementById("rankType").value == "No Input Detected") {
                alert("No Option Submitted For Rank Type. \nMake Sure To Select An Option.")
                return false
            }

            else if (parseFloat(document.getElementById("rangeStart").value) > parseFloat(document.getElementById("rangeEnd").value)) {
                alert("Range Start Is Greater Than Range End. \nMake Sure Range Start Is Lesser Than Or Equal To Range End.")
                return false
            }
        }

        function checkEmptyTierListSubmit() {
            if (document.getElementById("whoOptionsTierList").value == "No Input Detected") {
                alert("No Option Submitted For Tier List Who Type. \nMake Sure To Select An Option.")
                return false
            }

            else if (document.getElementById("rankTypeTierList").value == "No Input Detected") {
                alert("No Option Submitted For Tier List Rank Type. \nMake Sure To Select An Option.")
                return false
            }
        }

        function checkEmptyCircleSubmit() {
            if (document.getElementById("circleDropdown").value == "No Input Detected") {
                alert("No Option Submitted For Circle Search. \nMake Sure to Select An Option.")
                return false
            }
        }
    </script>
</html>
